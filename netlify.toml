[build]
  base = "portal"
  publish = "../public"  # Serve from root/public â€” OTP login lives here
  command = "npm install && npm run build && cp -r dist/* ../public/"  # Copy build output to public
  functions = "../netlify/functions"  # relative to "base"

[functions]
  included_files = ["node_modules/dotenv/**"]

[[redirects]]
  # Serve OTP login by default
  from = "/"
  to = "/index.html"
  status = 200

  # Post-login: send to the app's landing page
[[redirects]]
  from = "/dashboard"
  to = "/index.html"
  status = 200

# Support SPA routing in app
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200